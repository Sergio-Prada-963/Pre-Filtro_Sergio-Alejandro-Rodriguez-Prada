<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="theme-color" content="#000000" />
        <meta
            name="description"
            content="Web site created using create-react-app"
        />
        <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
        <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
        <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
        <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
        <title>Alejandro</title>
    </head>
    <body>
        <noscript>You need to enable JavaScript to run this app.</noscript>
        <div id="root"></div>
        <!-- <canvas id="canvas"></canvas> -->
        <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
        <script>
            window.requestAnimFrame = function () {
                return (
                    window.requestAnimationFrame ||
                    window.webkitRequestAnimationFrame ||
                    window.mozRequestAnimationFrame ||
                    window.oRequestAnimationFrame ||
                    window.msRequestAnimationFrame ||
                    function (callback) {
                        window.setTimeout(callback);
                    }
                );
            };
            if(document.getElementById(canvas)){
            function init(elemid) {
                let canvas = document.getElementById(elemid),
                    c = canvas.getContext("2d"),
                    w = (canvas.width = 70),
                    h = (canvas.height = 70);
                c.fillStyle = "rgba(30,30,30,1)";
                c.fillRect(0, 0, w, h);
                return { c: c, canvas: canvas };
            }

            window.onload = function () {
                let c = init("canvas").c,
                    canvas = init("canvas").canvas,
                    w = (canvas.width = 70),
                    h = (canvas.height = 70),
                    mouse = { x: false, y: false },
                    last_mouse = {};

                function dist(p1x, p1y, p2x, p2y) {
                    return Math.sqrt(
                        Math.pow(p2x - p1x, 2) + Math.pow(p2y - p1y, 2)
                    );
                }

                class segment {
                    constructor(parent, l, a, first) {
                        this.first = first;
                        if (first) {
                            this.pos = {
                                x: parent.x,
                                y: parent.y,
                            };
                        } else {
                            this.pos = {
                                x: parent.nextPos.x,
                                y: parent.nextPos.y,
                            };
                        }
                        this.l = l;
                        this.ang = a;
                        this.nextPos = {
                            x: this.pos.x + this.l * Math.cos(this.ang),
                            y: this.pos.y + this.l * Math.sin(this.ang),
                        };
                    }
                    update(t) {
                        this.ang = Math.atan2(
                            t.y - this.pos.y,
                            t.x - this.pos.x
                        );
                        this.pos.x =
                            t.x + this.l * Math.cos(this.ang - Math.PI);
                        this.pos.y =
                            t.y + this.l * Math.sin(this.ang - Math.PI);
                        this.nextPos.x =
                            this.pos.x + this.l * Math.cos(this.ang);
                        this.nextPos.y =
                            this.pos.y + this.l * Math.sin(this.ang);
                    }
                    fallback(t) {
                        this.pos.x = t.x;
                        this.pos.y = t.y;
                        this.nextPos.x =
                            this.pos.x + this.l * Math.cos(this.ang);
                        this.nextPos.y =
                            this.pos.y + this.l * Math.sin(this.ang);
                    }
                    show() {
                        c.lineTo(this.nextPos.x, this.nextPos.y);
                    }
                }

                class tentacle {
                    constructor(x, y, l, n, a) {
                        this.x = x;
                        this.y = y;
                        this.l = l;
                        this.n = n;
                        this.t = {};
                        this.rand = Math.random();
                        this.segments = [
                            new segment(this, this.l / this.n, 0, true),
                        ];
                        for (let i = 1; i < this.n; i++) {
                            this.segments.push(
                                new segment(
                                    this.segments[i - 1],
                                    this.l / this.n,
                                    0,
                                    false
                                )
                            );
                        }
                    }
                    move(last_target, target) {
                        this.angle = Math.atan2(
                            target.y - this.y,
                            target.x - this.x
                        );
                        this.dt =
                            dist(
                                last_target.x,
                                last_target.y,
                                target.x,
                                target.y
                            ) + 5;
                        this.t = {
                            x: target.x - 0.8 * this.dt * Math.cos(this.angle),
                            y: target.y - 0.8 * this.dt * Math.sin(this.angle),
                        };
                        if (this.t.x) {
                            this.segments[this.n - 1].update(this.t);
                        } else {
                            this.segments[this.n - 1].update(target);
                        }
                        for (let i = this.n - 2; i >= 0; i--) {
                            this.segments[i].update(this.segments[i + 1].pos);
                        }
                        if (
                            dist(this.x, this.y, target.x, target.y) <=
                            this.l +
                                dist(
                                    last_target.x,
                                    last_target.y,
                                    target.x,
                                    target.y
                                )
                        ) {
                            this.segments[0].fallback({ x: this.x, y: this.y });
                            for (let i = 1; i < this.n; i++) {
                                this.segments[i].fallback(
                                    this.segments[i - 1].nextPos
                                );
                            }
                        }
                    }
                    show(target) {
                        if (
                            dist(this.x, this.y, target.x, target.y) <= this.l
                        ) {
                            c.globalCompositeOperation = "lighter";
                            c.beginPath();
                            c.lineTo(this.x, this.y);
                            for (let i = 0; i < this.n; i++) {
                                this.segments[i].show();
                            }
                            c.strokeStyle =
                                "hsl(" +
                                (this.rand * 60 + 180) +
                                ",100%," +
                                (this.rand * 60 + 25) +
                                "%)";
                            c.lineWidth = this.rand * 2;
                            c.lineCap = "round";
                            c.lineJoin = "round";
                            c.stroke();
                            c.globalCompositeOperation = "source-over";
                        }
                    }
                    show2(target) {
                        c.beginPath();
                        if (
                            dist(this.x, this.y, target.x, target.y) <= this.l
                        ) {
                            c.arc(
                                this.x,
                                this.y,
                                1 * this.rand + 1,
                                0,
                                1 * Math.PI
                            );
                            c.fillStyle = "white";
                        } else {
                            c.arc(
                                this.x,
                                this.y,
                                this.rand * 2,
                                0,
                                1 * Math.PI
                            );
                            c.fillStyle = "rgba(255, 255, 255, 0.301)";
                        }
                        c.fill();
                    }
                }

                let maxl = 20,
                    minl = 5,
                    n = 10,
                    numt = 100,
                    tent = [],
                    clicked = false,
                    target = { x: 0, y: 0 },
                    last_target = {},
                    t = 0,
                    q = 10;

                for (let i = 0; i < numt; i++) {
                    tent.push(
                        new tentacle(
                            Math.random() * w,
                            Math.random() * h,
                            Math.random() * (maxl - minl) + minl,
                            n,
                            Math.random() * 2 * Math.PI
                        )
                    );
                }
                function draw() {
                    if (mouse.x) {
                        target.errx = mouse.x - target.x;
                        target.erry = mouse.y - target.y;
                    } else {
                        target.errx =
                            w / 2 +
                            ((h / 2 - q) * Math.sqrt(2) * Math.cos(t)) /
                                (Math.pow(Math.sin(t), 2) + 1) -
                            target.x;
                        target.erry =
                            h / 2 +
                            ((h / 2 - q) *
                                Math.sqrt(2) *
                                Math.cos(t) *
                                Math.sin(t)) /
                                (Math.pow(Math.sin(t), 2) + 1) -
                            target.y;
                    }

                    target.x += target.errx / 10;
                    target.y += target.erry / 10;

                    t += 0.01;

                    c.beginPath();
                    c.arc(
                        target.x,
                        target.y,
                        dist(last_target.x, last_target.y, target.x, target.y) +
                            5,
                        0,
                        2 * Math.PI
                    );
                    c.fillStyle = "hsl(210,100%,80%)";
                    c.fill();

                    for (i = 0; i < numt; i++) {
                        tent[i].move(last_target, target);
                        tent[i].show2(target);
                    }
                    for (i = 0; i < numt; i++) {
                        tent[i].show(target);
                    }
                    last_target.x = target.x;
                    last_target.y = target.y;
                }

                canvas.addEventListener(
                    "mousemove",
                    function (e) {
                        last_mouse.x = mouse.x;
                        last_mouse.y = mouse.y;

                        mouse.x = e.pageX - this.offsetLeft;
                        mouse.y = e.pageY - this.offsetTop;
                    },
                    false
                );

                canvas.addEventListener("mouseleave", function (e) {
                    mouse.x = false;
                    mouse.y = false;
                });

                canvas.addEventListener(
                    "mousedown",
                    function (e) {
                        clicked = true;
                    },
                    false
                );

                canvas.addEventListener(
                    "mouseup",
                    function (e) {
                        clicked = false;
                    },
                    false
                );

                function loop() {
                    window.requestAnimFrame(loop);
                    c.clearRect(0, 0, w, h);
                    draw();
                }

                window.addEventListener("resize", function () {
                    (w = canvas.width = 70), (h = canvas.height = 70);
                    loop();
                });

                loop();
                setInterval(loop, 1 / 60);
            };
        }
        </script>
        <script>
            if(document.getElementById("signUp")){
            const signUpButton = document.getElementById("signUp");
            const signInButton = document.getElementById("signIn");
            const container = document.getElementById("container");

            signUpButton.addEventListener("click", () => {
                container.classList.add("right-panel-active");
            });

            signInButton.addEventListener("click", () => {
                container.classList.remove("right-panel-active");
            });
        }
        </script>
    </body>
</html>
